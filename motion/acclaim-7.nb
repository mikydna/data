(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 10.1' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[     71429,       1726]
NotebookOptionsPosition[     70538,       1693]
NotebookOutlinePosition[     70892,       1709]
CellTagsIndexPosition[     70849,       1706]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[
 RowBox[{
  RowBox[{"raw$afs", "=", 
   RowBox[{"Import", "[", 
    RowBox[{
    "\"\</Users/andy/Code/data/motion/cmu/sport/06.asf\>\"", ",", " ", 
     "\"\<String\>\""}], "]"}]}], ";"}]], "Input"],

Cell[BoxData[
 RowBox[{
  RowBox[{"ParseBones", "[", "raw_List", "]"}], " ", ":=", 
  RowBox[{"Block", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{"blocks", ",", "\[IndentingNewLine]", "result"}], 
     "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", " ", 
    RowBox[{
     RowBox[{"blocks", "=", 
      RowBox[{"Map", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"Association", "[", 
          RowBox[{"Map", "[", 
           RowBox[{
            RowBox[{
             RowBox[{
              RowBox[{"#", "[", 
               RowBox[{"[", "1", "]"}], "]"}], "\[Rule]", 
              RowBox[{"#", "[", 
               RowBox[{"[", 
                RowBox[{"2", ";;"}], "]"}], "]"}]}], "&"}], ",", " ", 
            RowBox[{"StringSplit", "[", "#", "]"}]}], "]"}], "]"}], "&"}], 
        ",", "\[IndentingNewLine]", 
        RowBox[{"Map", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"raw", "[", 
            RowBox[{"[", 
             RowBox[{
              RowBox[{
               RowBox[{"#", "[", 
                RowBox[{"[", "1", "]"}], "]"}], "+", "1"}], ";;", 
              RowBox[{
               RowBox[{"#", "[", 
                RowBox[{"[", "2", "]"}], "]"}], "-", "1"}]}], "]"}], "]"}], 
           "&"}], ",", "\[IndentingNewLine]", 
          RowBox[{"Transpose", "[", 
           RowBox[{"{", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"Flatten", "[", 
              RowBox[{"Position", "[", 
               RowBox[{"raw", ",", "\"\<begin\>\""}], "]"}], "]"}], ",", 
             "\[IndentingNewLine]", 
             RowBox[{"Flatten", "[", 
              RowBox[{"Position", "[", 
               RowBox[{"raw", ",", "\"\<end\>\""}], "]"}], "]"}]}], 
            "\[IndentingNewLine]", "}"}], "]"}]}], "\[IndentingNewLine]", 
         "]"}]}], "\[IndentingNewLine]", "]"}]}], ";", "\[IndentingNewLine]", 
     "\[IndentingNewLine]", 
     RowBox[{"result", "=", 
      RowBox[{"Association", "@", 
       RowBox[{"Map", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"#", "[", "\"\<name\>\"", "]"}], "\[Rule]", "#"}], "&"}], 
         ",", "\[IndentingNewLine]", 
         RowBox[{"Map", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{
            RowBox[{"Block", "[", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"{", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"id", "=", 
                 RowBox[{
                  RowBox[{"#", "[", "\"\<id\>\"", "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"name", "=", 
                 RowBox[{
                  RowBox[{"#", "[", "\"\<name\>\"", "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"direction", "=", 
                 RowBox[{"Internal`StringToDouble", "/@", 
                  RowBox[{"#", "[", "\"\<direction\>\"", "]"}]}]}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"length", "=", 
                 RowBox[{
                  RowBox[{"#", "[", "\"\<length\>\"", "]"}], "[", 
                  RowBox[{"[", "1", "]"}], "]"}]}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"axis", "=", 
                 RowBox[{"{", "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{
                    RowBox[{
                    RowBox[{
                    RowBox[{"Internal`StringToDouble", "[", "#", "]"}], 
                    "Degree"}], "&"}], "/@", 
                    RowBox[{
                    RowBox[{"#", "[", "\"\<axis\>\"", "]"}], "[", 
                    RowBox[{"[", 
                    RowBox[{"1", ";;", "3"}], "]"}], "]"}]}], ",", 
                   "\[IndentingNewLine]", 
                   RowBox[{
                    RowBox[{"#", "[", "\"\<axis\>\"", "]"}], "[", 
                    RowBox[{"[", "4", "]"}], "]"}]}], "\[IndentingNewLine]", 
                  "}"}]}], ",", "\[IndentingNewLine]", 
                RowBox[{"dof", "=", 
                 RowBox[{"If", "[", "\[IndentingNewLine]", 
                  RowBox[{
                   RowBox[{"KeyExistsQ", "[", 
                    RowBox[{"#", ",", "\"\<dof\>\""}], "]"}], ",", 
                   "\[IndentingNewLine]", 
                   RowBox[{"{", "\[IndentingNewLine]", 
                    RowBox[{
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{"#", "[", "\"\<dof\>\"", "]"}], ",", 
                    "\"\<rx\>\""}], "]"}], ",", 
                    RowBox[{
                    RowBox[{"Position", "[", 
                    RowBox[{
                    RowBox[{"#", "[", "\"\<dof\>\"", "]"}], ",", 
                    "\"\<rx\>\""}], "]"}], "[", 
                    RowBox[{"[", 
                    RowBox[{"1", ",", "1"}], "]"}], "]"}], ",", 
                    RowBox[{"-", "1"}]}], "]"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{"#", "[", "\"\<dof\>\"", "]"}], ",", 
                    "\"\<ry\>\""}], "]"}], ",", 
                    RowBox[{
                    RowBox[{"Position", "[", 
                    RowBox[{
                    RowBox[{"#", "[", "\"\<dof\>\"", "]"}], ",", 
                    "\"\<ry\>\""}], "]"}], "[", 
                    RowBox[{"[", 
                    RowBox[{"1", ",", "1"}], "]"}], "]"}], ",", 
                    RowBox[{"-", "1"}]}], "]"}], ",", "\[IndentingNewLine]", 
                    RowBox[{"If", "[", 
                    RowBox[{
                    RowBox[{"MemberQ", "[", 
                    RowBox[{
                    RowBox[{"#", "[", "\"\<dof\>\"", "]"}], ",", 
                    "\"\<rz\>\""}], "]"}], ",", 
                    RowBox[{
                    RowBox[{"Position", "[", 
                    RowBox[{
                    RowBox[{"#", "[", "\"\<dof\>\"", "]"}], ",", 
                    "\"\<rz\>\""}], "]"}], "[", 
                    RowBox[{"[", 
                    RowBox[{"1", ",", "1"}], "]"}], "]"}], ",", 
                    RowBox[{"-", "1"}]}], "]"}]}], "\[IndentingNewLine]", 
                    "}"}], ",", "\[IndentingNewLine]", 
                   RowBox[{"{", 
                    RowBox[{
                    RowBox[{"-", "1"}], ",", " ", 
                    RowBox[{"-", "1"}], ",", " ", 
                    RowBox[{"-", "1"}]}], "}"}]}], "\[IndentingNewLine]", 
                  "]"}]}]}], "\[IndentingNewLine]", "}"}], ",", 
              "\[IndentingNewLine]", 
              RowBox[{"<|", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"\"\<id\>\"", "\[Rule]", " ", "id"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"\"\<name\>\"", "\[Rule]", "name"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"\"\<direction\>\"", "\[Rule]", " ", "direction"}], 
                ",", "\[IndentingNewLine]", 
                RowBox[{"\"\<length\>\"", "\[Rule]", 
                 RowBox[{"Internal`StringToDouble", "[", "length", "]"}]}], 
                ",", "\[IndentingNewLine]", 
                RowBox[{"\"\<axis\>\"", "\[Rule]", " ", "axis"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"\"\<dof\>\"", "\[Rule]", "dof"}]}], 
               "\[IndentingNewLine]", "|>"}]}], "\[IndentingNewLine]", "]"}], 
            "&"}], ",", "\[IndentingNewLine]", "blocks"}], 
          "\[IndentingNewLine]", "]"}]}], "\[IndentingNewLine]", "]"}]}]}], 
     ";", "\[IndentingNewLine]", "\[IndentingNewLine]", "result"}]}], 
   "\[IndentingNewLine]", "]"}]}]], "Input",
 CellChangeTimes->{{3.682686177736158*^9, 3.682686233092648*^9}, {
  3.682686509091041*^9, 3.682686531441473*^9}, {3.682686567346477*^9, 
  3.682686591684449*^9}, {3.682686922190913*^9, 3.682686927612973*^9}, {
  3.682687030305086*^9, 3.682687055022788*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"SplitBlocks", "[", "raw_String", "]"}], ":=", 
  RowBox[{"Association", "@", 
   RowBox[{"Map", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{
      RowBox[{
       RowBox[{"#", "[", 
        RowBox[{"[", "1", "]"}], "]"}], " ", "->", " ", 
       RowBox[{"#", "[", 
        RowBox[{"[", 
         RowBox[{"2", " ", ";;"}], "]"}], "]"}]}], " ", "&"}], ",", 
     "\[IndentingNewLine]", " ", 
     RowBox[{"Map", "[", 
      RowBox[{
       RowBox[{
        RowBox[{"StringTrim", " ", "/@", " ", 
         RowBox[{"StringSplit", "[", 
          RowBox[{"#", ",", " ", "\"\<\\n\>\""}], "]"}]}], " ", "&"}], ",", 
       " ", 
       RowBox[{"StringSplit", "[", 
        RowBox[{"raw", ",", " ", "\"\<:\>\""}], "]"}]}], "]"}]}], 
    "\[IndentingNewLine]", "]"}]}]}]], "Input",
 CellChangeTimes->{{3.682686283691739*^9, 3.682686300027073*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"ParseHierarchy", "[", "raw_List", "]"}], ":=", 
   "\[IndentingNewLine]", 
   RowBox[{"Block", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"paths", "=", 
        RowBox[{"StringSplit", "/@", 
         RowBox[{"raw", "[", 
          RowBox[{"[", 
           RowBox[{"2", ";;", 
            RowBox[{"-", "2"}]}], "]"}], "]"}]}]}], ",", 
       "\[IndentingNewLine]", "v", ",", "\[IndentingNewLine]", "e", ","}], 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"v", "=", 
       RowBox[{"DeleteDuplicates", "@", 
        RowBox[{"Flatten", "[", "paths", "]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"e", "=", 
       RowBox[{"Flatten", "@", 
        RowBox[{"Map", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"Block", "[", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"{", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{"parent", "=", 
                RowBox[{"#", "[", 
                 RowBox[{"[", "1", "]"}], "]"}]}], ",", " ", 
               "\[IndentingNewLine]", 
               RowBox[{"children", "=", 
                RowBox[{"#", "[", 
                 RowBox[{"[", 
                  RowBox[{"2", ";;"}], "]"}], "]"}]}]}], 
              "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{
               RowBox[{"parent", "\[Rule]", "#"}], "&"}], "/@", 
              "children"}]}], "\[IndentingNewLine]", "]"}], "&"}], ",", 
          "\[IndentingNewLine]", "paths"}], "\[IndentingNewLine]", "]"}]}]}], 
      ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"Association", "@", 
       RowBox[{"Map", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"Block", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{"path", ",", "\[IndentingNewLine]", "parent"}], 
             "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"path", "=", 
              RowBox[{"FindShortestPath", "[", 
               RowBox[{
                RowBox[{"Graph", "[", "e", "]"}], ",", "\"\<root\>\"", ",", 
                "#"}], "]"}]}], ";", "\[IndentingNewLine]", 
             RowBox[{"parent", "=", 
              RowBox[{"If", "[", 
               RowBox[{
                RowBox[{
                 RowBox[{"Length", "[", "path", "]"}], ">", "1"}], ",", 
                RowBox[{"path", "[", 
                 RowBox[{"[", 
                  RowBox[{"-", "2"}], "]"}], "]"}], ",", "Null"}], "]"}]}], 
             ";", "\[IndentingNewLine]", 
             RowBox[{"#", "\[Rule]", 
              RowBox[{"<|", "\[IndentingNewLine]", 
               RowBox[{
                RowBox[{"\"\<path\>\"", "\[Rule]", "path"}], ",", 
                "\[IndentingNewLine]", 
                RowBox[{"\"\<parent\>\"", "\[Rule]", "parent"}]}], 
               "\[IndentingNewLine]", "|>"}]}]}]}], "\[IndentingNewLine]", 
           "]"}], "&"}], ",", "\[IndentingNewLine]", "v"}], 
        "\[IndentingNewLine]", "]"}]}]}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.682687219455649*^9, 3.682687268093729*^9}, 
   3.682687321100803*^9, {3.682689490763617*^9, 3.682689544505868*^9}, {
   3.682689578398048*^9, 3.6826897244395123`*^9}, {3.682689757062188*^9, 
   3.682689786703127*^9}, {3.682689849457491*^9, 3.6826898521681547`*^9}, {
   3.682689885974758*^9, 3.682689933059737*^9}, {3.6826899644428387`*^9, 
   3.682690020487728*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{
   RowBox[{"ParseRoot", "[", "raw_List", "]"}], ":=", "\[IndentingNewLine]", 
   RowBox[{"Block", "[", "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"{", "\[IndentingNewLine]", 
      RowBox[{
      "blocks", ",", "\[IndentingNewLine]", "\[IndentingNewLine]", "position",
        ",", "\[IndentingNewLine]", "orientation", ",", "\[IndentingNewLine]",
        "\[IndentingNewLine]", "result"}], "\[IndentingNewLine]", "}"}], ",", 
     "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"blocks", "=", 
       RowBox[{"Association", "@", 
        RowBox[{"Map", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{
            RowBox[{"#", "[", 
             RowBox[{"[", "1", "]"}], "]"}], "\[Rule]", 
            RowBox[{"#", "[", 
             RowBox[{"[", 
              RowBox[{"2", ";;"}], "]"}], "]"}]}], "&"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{
            RowBox[{"StringSplit", "[", 
             RowBox[{"#", ",", "Whitespace"}], "]"}], "&"}], "/@", "raw"}]}], 
         "\[IndentingNewLine]", "]"}]}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", 
      RowBox[{"position", "=", 
       RowBox[{"Internal`StringToDouble", "/@", 
        RowBox[{"blocks", "[", "\"\<position\>\"", "]"}]}]}], ";", 
      "\[IndentingNewLine]", 
      RowBox[{"orientation", "=", 
       RowBox[{"Internal`StringToDouble", "/@", 
        RowBox[{"blocks", "[", "\"\<position\>\"", "]"}]}]}], ";", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", 
      RowBox[{"result", "=", 
       RowBox[{"<|", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"\"\<position\>\"", "\[Rule]", " ", "position"}], ",", 
         "\[IndentingNewLine]", 
         RowBox[{"\"\<orientation\>\"", "\[Rule]", "orientation"}]}], 
        "\[IndentingNewLine]", "|>"}]}], ";", "\[IndentingNewLine]", 
      "\[IndentingNewLine]", "result"}]}], "\[IndentingNewLine]", "]"}]}], 
  ";"}]], "Input",
 CellChangeTimes->{{3.682687984265581*^9, 3.68268799625362*^9}, {
  3.682688060522976*^9, 3.682688243014147*^9}, {3.682689262487418*^9, 
  3.6826892731469297`*^9}, {3.6826910088945217`*^9, 3.682691015324048*^9}}],

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{
     RowBox[{"ImportAFS2", "[", "raw_", "]"}], ":=", 
     RowBox[{"Block", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"{", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{"str", "=", "raw"}], ",", "\[IndentingNewLine]", "blocks", 
         ",", "\[IndentingNewLine]", "\[IndentingNewLine]", "root", ",", 
         "\[IndentingNewLine]", "bones", ",", "\[IndentingNewLine]", 
         "hierarchy", ",", "\[IndentingNewLine]", "$"}], 
        "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{"str", "=", 
         RowBox[{"DropComments", "[", "str", "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"blocks", "=", 
         RowBox[{"SplitBlocks", "[", "str", "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"root", "=", 
         RowBox[{"ParseRoot", "[", 
          RowBox[{"blocks", "[", "\"\<root\>\"", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"bones", "=", 
         RowBox[{"ParseBones", "[", 
          RowBox[{"blocks", "[", "\"\<bonedata\>\"", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", 
        RowBox[{"hierarchy", "=", 
         RowBox[{"ParseHierarchy", "[", 
          RowBox[{"blocks", "[", "\"\<hierarchy\>\"", "]"}], "]"}]}], ";", 
        "\[IndentingNewLine]", "\[IndentingNewLine]", 
        RowBox[{"<|", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{"\"\<root\>\"", "\[Rule]", "root"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<bones\>\"", "\[Rule]", "bones"}], ",", 
          "\[IndentingNewLine]", 
          RowBox[{"\"\<hierarchy\>\"", "\[Rule]", "hierarchy"}]}], 
         "\[IndentingNewLine]", "|>"}]}]}], "\[IndentingNewLine]", "]"}]}], 
    ";"}], "\n"}]}]], "Input",
 CellChangeTimes->{{3.6826863333812857`*^9, 3.682686360545271*^9}, {
   3.682686408256887*^9, 3.682686417799518*^9}, {3.682686652250926*^9, 
   3.682686677841696*^9}, 3.682686812422927*^9, {3.682687273491914*^9, 
   3.682687293492928*^9}, {3.6826880059997396`*^9, 3.6826880271492653`*^9}, {
   3.682688248261183*^9, 3.682688258524231*^9}}],

Cell[BoxData[
 RowBox[{
  RowBox[{"afs", "=", 
   RowBox[{"ImportAFS2", "[", "raw$afs", "]"}]}], ";"}]], "Input",
 CellChangeTimes->{{3.682686816017953*^9, 3.6826868344055223`*^9}, {
   3.682687152993636*^9, 3.682687168044161*^9}, 3.682687297725288*^9, {
   3.6826879030560303`*^9, 3.682687961492201*^9}, {3.682688030708858*^9, 
   3.6826880553102016`*^9}, {3.6826880937797832`*^9, 3.6826881015844707`*^9}, 
   3.682688286082345*^9, {3.682689807862213*^9, 3.682689810764757*^9}, {
   3.682690710793297*^9, 3.682690711001596*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{"Block", "[", "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"{", "\[IndentingNewLine]", 
     RowBox[{
      RowBox[{"root", "=", 
       RowBox[{"afs", "[", "\"\<root\>\"", "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"bones", "=", 
       RowBox[{"afs", "[", "\"\<bones\>\"", "]"}]}], ",", 
      "\[IndentingNewLine]", 
      RowBox[{"hierarchy", "=", 
       RowBox[{"afs", "[", "\"\<hierarchy\>\"", "]"}]}], ",", 
      "\[IndentingNewLine]", "\[IndentingNewLine]", "pos"}], 
     "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"pos", "=", 
      RowBox[{"Association", "@", 
       RowBox[{"Map", "[", "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{"Block", "[", "\[IndentingNewLine]", 
           RowBox[{
            RowBox[{"{", "\[IndentingNewLine]", 
             RowBox[{
              RowBox[{"bone", "=", 
               RowBox[{"#", "[", 
                RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
              
              RowBox[{"path", "=", 
               RowBox[{
                RowBox[{"#", "[", 
                 RowBox[{"[", "2", "]"}], "]"}], "[", "\"\<path\>\"", "]"}]}],
               ",", "\[IndentingNewLine]", 
              RowBox[{"parent", "=", 
               RowBox[{
                RowBox[{"#", "[", 
                 RowBox[{"[", "2", "]"}], "]"}], "[", "\"\<parent\>\"", 
                "]"}]}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
              "v"}], "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]",
             "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"v", "=", 
              RowBox[{"root", "[", "\"\<position\>\"", "]"}]}], ";", 
             "\[IndentingNewLine]", 
             RowBox[{"Map", "[", "\[IndentingNewLine]", 
              RowBox[{
               RowBox[{
                RowBox[{"Block", "[", "\[IndentingNewLine]", 
                 RowBox[{
                  RowBox[{"{", "\[IndentingNewLine]", 
                   RowBox[{"at", "=", "#"}], "\[IndentingNewLine]", "}"}], 
                  ",", "\[IndentingNewLine]", 
                  RowBox[{"v", "=", 
                   RowBox[{"v", "+", 
                    RowBox[{
                    RowBox[{
                    RowBox[{"bones", "[", "at", "]"}], "[", 
                    "\"\<direction\>\"", "]"}], "*", 
                    RowBox[{
                    RowBox[{"bones", "[", "at", "]"}], "[", "\"\<length\>\"", 
                    "]"}]}]}]}]}], "\[IndentingNewLine]", "]"}], "&"}], ",", 
               "\[IndentingNewLine]", 
               RowBox[{"path", "[", 
                RowBox[{"[", 
                 RowBox[{"2", ";;"}], "]"}], "]"}]}], "\[IndentingNewLine]", 
              "]"}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
             RowBox[{"bone", "\[Rule]", "v"}]}]}], "\[IndentingNewLine]", 
           "]"}], "&"}], ",", "\[IndentingNewLine]", 
         RowBox[{"Normal", "[", 
          RowBox[{"hierarchy", "[", 
           RowBox[{"[", 
            RowBox[{"2", ";;"}], "]"}], "]"}], "]"}]}], "\[IndentingNewLine]",
         "]"}]}]}], ";", "\[IndentingNewLine]", "\[IndentingNewLine]", 
     RowBox[{"Graphics3D", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
       "{", "\[IndentingNewLine]", "\[IndentingNewLine]", 
        "\[IndentingNewLine]", 
        RowBox[{
         RowBox[{
          RowBox[{
           RowBox[{"Text", "[", 
            RowBox[{
             RowBox[{"#", "[", 
              RowBox[{"[", "1", "]"}], "]"}], ",", 
             RowBox[{"#", "[", 
              RowBox[{"[", "2", "]"}], "]"}]}], "]"}], "&"}], "/@", 
          RowBox[{"Normal", "[", "pos", "]"}]}], ","}], "\[IndentingNewLine]",
         "}"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", 
       RowBox[{"Boxed", "\[Rule]", "False"}]}], "\[IndentingNewLine]", 
      "]"}]}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   "]"}]}]], "Input",
 CellChangeTimes->{{3.68268829456147*^9, 3.682688698552606*^9}, {
  3.682688734444642*^9, 3.682688877143443*^9}, {3.682688909318302*^9, 
  3.68268903086304*^9}, {3.6826890624630117`*^9, 3.682689236822372*^9}, {
  3.682689297701038*^9, 3.682689407894394*^9}, {3.682689444008095*^9, 
  3.682689444943448*^9}, {3.682690059503286*^9, 3.682690142519326*^9}, {
  3.6826904454660263`*^9, 3.682690561234777*^9}, {3.68269061641531*^9, 
  3.682690675810707*^9}, {3.682690717032674*^9, 3.682690720168199*^9}, {
  3.6826907599042997`*^9, 3.6826907720227003`*^9}}],

Cell[BoxData[
 Graphics3DBox[{
   Text3DBox["\<\"lhipjoint\"\>", {1.7323993015500003`, -1.89998937297, 
    0.57993882363}], 
   Text3DBox["\<\"rhipjoint\"\>", {-1.57077666495, -1.89998270487, 
    0.57993719247}], 
   Text3DBox["\<\"lowerback\"\>", {-0.009077968972799999, 
    2.00014745112, -0.35323207920000005`}], 
   Text3DBox["\<\"lfemur\"\>", {4.163463780750001, -8.57928962925, 
    0.57993882363}], 
   Text3DBox["\<\"ltibia\"\>", {6.9520075639500005`, -16.24075700913, 
    0.57993882363}], 
   Text3DBox["\<\"lfoot\"\>", {7.125150350019, -16.71646317039, 
    2.59057767528}], 
   Text3DBox["\<\"ltoes\"\>", {7.125150350034997, -16.716463170433933`, 
    3.63204767528}], 
   Text3DBox["\<\"rfemur\"\>", {-4.07243749235, -8.77324499328, 
    0.57993719247}], 
   Text3DBox["\<\"rtibia\"\>", {-6.84547408875, -16.39210669254, 
    0.57993719247}], 
   Text3DBox["\<\"rfoot\"\>", {-7.080608776649999, -17.03813113509, 
    2.69033194302}], 
   Text3DBox["\<\"rtoes\"\>", {-7.08060877666698, -17.038131135136656`, 
    3.7963019430199996`}], 
   Text3DBox["\<\"upperback\"\>", {0.047391061431200004`, 
    4.02272887328, -0.31053190578400003`}], 
   Text3DBox["\<\"thorax\"\>", {0.11453096900620001`, 
    6.11194584482, -0.09314340341400001}], 
   Text3DBox["\<\"lowerneck\"\>", {0.09378996767020001, 7.849057843200001, 
    0.038025328785999984`}], 
   Text3DBox["\<\"lclavicle\"\>", {3.3199042232562, 
    7.226265252, -0.369939815731}], 
   Text3DBox["\<\"rclavicle\"\>", {-2.8553013873138, 
    7.5379624611, -0.467631751564}], 
   Text3DBox["\<\"upperneck\"\>", {0.0702003803482, 
    9.585207778860001, -0.20517287233400003`}], 
   Text3DBox["\<\"head\"\>", {0.0644140199288, 
    11.345024081530001`, -0.30205377515200005`}], 
   Text3DBox["\<\"lhumerus\"\>", {8.3791342232562, 
    7.226265251772863, -0.369939815731}], 
   Text3DBox["\<\"lradius\"\>", {11.8990942232562, 
    7.226265251614829, -0.369939815731}], 
   Text3DBox["\<\"lwrist\"\>", {13.6590742232562, 
    7.226265251535803, -0.369939815731}], 
   Text3DBox["\<\"lhand\"\>", {14.3114512232562, 
    7.22626525150651, -0.369939815731}], 
   Text3DBox["\<\"lthumb\"\>", {14.1930687017302, 7.2262652514878605`, 
    0.16405466274300007`}], 
   Text3DBox["\<\"lfingers\"\>", {14.8374152232562, 
    7.2262652514829, -0.369939815731}], 
   Text3DBox["\<\"rhumerus\"\>", {-8.2639713873138, 
    7.537962460857168, -0.467631751564}], 
   Text3DBox["\<\"rradius\"\>", {-11.3936113873138, 
    7.5379624607166615`, -0.467631751564}], 
   Text3DBox["\<\"rwrist\"\>", {-12.958431387313802`, 
    7.537962460646406, -0.467631751564}], 
   Text3DBox["\<\"rhand\"\>", {-13.791139387313802`, 
    7.537962460609019, -0.467631751564}], 
   Text3DBox["\<\"rthumb\"\>", {-13.640033037823802`, 7.537962460585203, 
    0.213969898946}], 
   Text3DBox["\<\"rfingers\"\>", {-14.462490387313801`, 
    7.537962460578873, -0.467631751564}]},
  Boxed->False,
  ImageSize->{525.1652745383711, 1024.},
  ViewPoint->{2.8029529442938483`, -1.2933416106077371`, 1.3859012484102293`},
  
  ViewVertical->{0.6463267149484909, 0.51591361204667, 
   3.962280859056214}]], "Output",
 CellChangeTimes->{3.682690634404955*^9, 3.682690676284184*^9, 
  3.6826907206283627`*^9, 3.68269076357159*^9}]
}, Open  ]],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"\[IndentingNewLine]", 
  RowBox[{"afs", "[", "\"\<hierarchy\>\"", "]"}]}]], "Input",
 CellChangeTimes->{{3.682690579400577*^9, 3.682690582944894*^9}}],

Cell[BoxData[
 RowBox[{"\[LeftAssociation]", 
  RowBox[{
   RowBox[{"\<\"root\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", "\<\"root\"\>", "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "Null"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lhipjoint\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lhipjoint\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"root\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rhipjoint\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"rhipjoint\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"root\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lowerback\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"root\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lfemur\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lhipjoint\"\>", 
         ",", "\<\"lfemur\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lhipjoint\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"ltibia\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lhipjoint\"\>", 
         ",", "\<\"lfemur\"\>", ",", "\<\"ltibia\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lfemur\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lfoot\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lhipjoint\"\>", 
         ",", "\<\"lfemur\"\>", ",", "\<\"ltibia\"\>", ",", "\<\"lfoot\"\>"}],
         "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"ltibia\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"ltoes\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lhipjoint\"\>", 
         ",", "\<\"lfemur\"\>", ",", "\<\"ltibia\"\>", ",", "\<\"lfoot\"\>", 
         ",", "\<\"ltoes\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lfoot\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rfemur\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"rhipjoint\"\>", 
         ",", "\<\"rfemur\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rhipjoint\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rtibia\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"rhipjoint\"\>", 
         ",", "\<\"rfemur\"\>", ",", "\<\"rtibia\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rfemur\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rfoot\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"rhipjoint\"\>", 
         ",", "\<\"rfemur\"\>", ",", "\<\"rtibia\"\>", ",", "\<\"rfoot\"\>"}],
         "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rtibia\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rtoes\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"rhipjoint\"\>", 
         ",", "\<\"rfemur\"\>", ",", "\<\"rtibia\"\>", ",", "\<\"rfoot\"\>", 
         ",", "\<\"rtoes\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rfoot\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"upperback\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lowerback\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"thorax\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"upperback\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lowerneck\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lowerneck\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"thorax\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lclavicle\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lclavicle\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"thorax\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rclavicle\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"rclavicle\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"thorax\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"upperneck\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lowerneck\"\>", ",", "\<\"upperneck\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lowerneck\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"head\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lowerneck\"\>", ",", "\<\"upperneck\"\>", 
         ",", "\<\"head\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"upperneck\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lhumerus\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lclavicle\"\>", ",", "\<\"lhumerus\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lclavicle\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lradius\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lclavicle\"\>", ",", "\<\"lhumerus\"\>", 
         ",", "\<\"lradius\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lhumerus\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lwrist\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lclavicle\"\>", ",", "\<\"lhumerus\"\>", 
         ",", "\<\"lradius\"\>", ",", "\<\"lwrist\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lradius\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lhand\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lclavicle\"\>", ",", "\<\"lhumerus\"\>", 
         ",", "\<\"lradius\"\>", ",", "\<\"lwrist\"\>", 
         ",", "\<\"lhand\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lwrist\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lthumb\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lclavicle\"\>", ",", "\<\"lhumerus\"\>", 
         ",", "\<\"lradius\"\>", ",", "\<\"lwrist\"\>", 
         ",", "\<\"lthumb\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lwrist\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"lfingers\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"lclavicle\"\>", ",", "\<\"lhumerus\"\>", 
         ",", "\<\"lradius\"\>", ",", "\<\"lwrist\"\>", ",", "\<\"lhand\"\>", 
         ",", "\<\"lfingers\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"lhand\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rhumerus\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"rclavicle\"\>", ",", "\<\"rhumerus\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rclavicle\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rradius\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"rclavicle\"\>", ",", "\<\"rhumerus\"\>", 
         ",", "\<\"rradius\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rhumerus\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rwrist\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"rclavicle\"\>", ",", "\<\"rhumerus\"\>", 
         ",", "\<\"rradius\"\>", ",", "\<\"rwrist\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rradius\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rhand\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"rclavicle\"\>", ",", "\<\"rhumerus\"\>", 
         ",", "\<\"rradius\"\>", ",", "\<\"rwrist\"\>", 
         ",", "\<\"rhand\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rwrist\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rthumb\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"rclavicle\"\>", ",", "\<\"rhumerus\"\>", 
         ",", "\<\"rradius\"\>", ",", "\<\"rwrist\"\>", 
         ",", "\<\"rthumb\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rwrist\"\>"}]}], 
     "\[RightAssociation]"}]}], ",", 
   RowBox[{"\<\"rfingers\"\>", "\[Rule]", 
    RowBox[{"\[LeftAssociation]", 
     RowBox[{
      RowBox[{"\<\"path\"\>", "\[Rule]", 
       RowBox[{"{", 
        RowBox[{"\<\"root\"\>", ",", "\<\"lowerback\"\>", 
         ",", "\<\"upperback\"\>", ",", "\<\"thorax\"\>", 
         ",", "\<\"rclavicle\"\>", ",", "\<\"rhumerus\"\>", 
         ",", "\<\"rradius\"\>", ",", "\<\"rwrist\"\>", ",", "\<\"rhand\"\>", 
         ",", "\<\"rfingers\"\>"}], "}"}]}], ",", 
      RowBox[{"\<\"parent\"\>", "\[Rule]", "\<\"rhand\"\>"}]}], 
     "\[RightAssociation]"}]}]}], "\[RightAssociation]"}]], "Output",
 CellChangeTimes->{{3.6826888066205072`*^9, 3.6826888198504133`*^9}, {
   3.682688866948964*^9, 3.682688878575962*^9}, {3.682688947350971*^9, 
   3.682688954302833*^9}, {3.6826890228620577`*^9, 3.682689031501051*^9}, {
   3.682689110588498*^9, 3.682689237367158*^9}, 3.682689299113703*^9, {
   3.682689332505889*^9, 3.682689366317732*^9}, 3.68268940849979*^9, 
   3.682689445736259*^9, {3.682690088661499*^9, 3.682690102424346*^9}, 
   3.682690142953746*^9, {3.682690516538129*^9, 3.682690583239326*^9}}]
}, Open  ]],

Cell[BoxData[
 RowBox[{
  RowBox[{"afs", "[", "\"\<hierarchy\>\"", "]"}], 
  "\[IndentingNewLine]"}]], "Input",
 CellChangeTimes->{{3.682689430376404*^9, 3.682689433565757*^9}}],

Cell[CellGroupData[{

Cell[BoxData[
 RowBox[{"Graphics3D", "[", "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{"{", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", "pos", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{"(*", 
     RowBox[{
      RowBox[{"Map", "[", "\[IndentingNewLine]", 
       RowBox[{
        RowBox[{
         RowBox[{"Block", "[", "\[IndentingNewLine]", 
          RowBox[{
           RowBox[{"{", "\[IndentingNewLine]", 
            RowBox[{
             RowBox[{"label", "=", 
              RowBox[{"#", "[", 
               RowBox[{"[", "1", "]"}], "]"}]}], ",", "\[IndentingNewLine]", 
             RowBox[{"v", "=", 
              RowBox[{"#", "[", 
               RowBox[{"[", "2", "]"}], "]"}]}]}], "\[IndentingNewLine]", 
            "}"}], ",", "\[IndentingNewLine]", 
           RowBox[{"{", 
            RowBox[{
             RowBox[{"Text", "[", 
              RowBox[{"label", ",", "v"}], "]"}], ",", 
             RowBox[{"Point", "[", "v", "]"}]}], "}"}]}], 
          "\[IndentingNewLine]", "]"}], "&"}], ",", "\[IndentingNewLine]", 
        RowBox[{"Normal", "[", "pos", "]"}]}], "\[IndentingNewLine]", "]"}], 
      ","}], "*)"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
    RowBox[{"(*", " ", "hierarchy", " ", "*)"}], "\[IndentingNewLine]", 
    RowBox[{
     RowBox[{"Map", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"Line", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"#", "\[Equal]", "\"\<root\>\""}], ",", 
             RowBox[{"root", "[", "\"\<position\>\"", "]"}], ",", 
             RowBox[{"pos", "[", "#", "]"}]}], "]"}], "&"}], "/@", 
          RowBox[{"#", "[", 
           RowBox[{"[", 
            RowBox[{";;", 
             RowBox[{"-", "2"}]}], "]"}], "]"}]}], "\[IndentingNewLine]", 
         "]"}], "&"}], ",", "\[IndentingNewLine]", 
       RowBox[{"Values", "[", "hierarchy", "]"}]}], "\[IndentingNewLine]", 
      "]"}], ",", "\[IndentingNewLine]", "\[IndentingNewLine]", "Red", ",", 
     "\[IndentingNewLine]", 
     RowBox[{"Map", "[", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{
        RowBox[{"Line", "[", "\[IndentingNewLine]", 
         RowBox[{
          RowBox[{
           RowBox[{"If", "[", 
            RowBox[{
             RowBox[{"#", "\[Equal]", "\"\<root\>\""}], ",", 
             RowBox[{"root", "[", "\"\<position\>\"", "]"}], ",", 
             RowBox[{"pos", "[", "#", "]"}]}], "]"}], "&"}], "/@", 
          RowBox[{"If", "[", 
           RowBox[{
            RowBox[{
             RowBox[{"Length", "[", "#", "]"}], ">", "1"}], ",", 
            RowBox[{"#", "[", 
             RowBox[{"[", 
              RowBox[{
               RowBox[{"-", "2"}], ";;"}], "]"}], "]"}], ",", "#"}], "]"}]}], 
         "\[IndentingNewLine]", "]"}], "&"}], ",", "\[IndentingNewLine]", 
       RowBox[{"Values", "[", "hierarchy", "]"}]}], "\[IndentingNewLine]", 
      "]"}]}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
    "\[IndentingNewLine]", "}"}], ",", "\[IndentingNewLine]", 
   RowBox[{"Boxed", "\[Rule]", "False"}]}], "\[IndentingNewLine]", 
  "]"}]], "Input"],

Cell[BoxData[
 RowBox[{"Association", "[", 
  RowBox[{"Map", "[", 
   RowBox[{"{", 
    RowBox[{
     RowBox[{"\<\"root\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lhipjoint\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rhipjoint\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lowerback\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lfemur\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"ltibia\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lfoot\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"ltoes\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rfemur\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rtibia\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rfoot\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rtoes\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"upperback\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"thorax\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lowerneck\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lclavicle\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rclavicle\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"upperneck\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"head\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lhumerus\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lradius\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lwrist\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lhand\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lthumb\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"lfingers\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rhumerus\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rradius\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rwrist\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rhand\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rthumb\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}], ",", 
     RowBox[{"\<\"rfingers\"\>", " ", 
      RowBox[{"(", 
       RowBox[{
        RowBox[{"Block", "[", 
         RowBox[{
          RowBox[{"{", 
           RowBox[{"path", ",", "parent"}], "}"}], ",", 
          RowBox[{
           RowBox[{"path", "=", 
            RowBox[{"FindShortestPath", "[", 
             RowBox[{
              RowBox[{"Graph", "[", "e", "]"}], ",", "\<\"root\"\>", ",", 
              "#1"}], "]"}]}], ";", 
           RowBox[{"parent", "=", 
            RowBox[{"path", "\[LeftDoubleBracket]", 
             RowBox[{"-", "2"}], "\[RightDoubleBracket]"}]}], ";", 
           RowBox[{"Association", "[", 
            RowBox[{
             RowBox[{"\<\"path\"\>", "\[Rule]", "path"}], ",", 
             RowBox[{"\<\"parent\"\>", "\[Rule]", "parent"}]}], "]"}]}]}], 
         "]"}], "&"}], ")"}]}]}], "}"}], "]"}], "]"}]], "Output",
 CellChangeTimes->{
  3.682689434149547*^9, 3.682689554018923*^9, {3.6826897296443033`*^9, 
   3.6826897363428583`*^9}}]
}, Open  ]]
},
WindowSize->{808, 651},
WindowMargins->{{Automatic, 39}, {Automatic, 0}},
FrontEndVersion->"10.1 for Mac OS X x86 (32-bit, 64-bit Kernel) (March 23, \
2015)",
StyleDefinitions->"Default.nb"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 213, 6, 28, "Input"],
Cell[774, 28, 8340, 183, 947, "Input"],
Cell[9117, 213, 884, 24, 80, "Input"],
Cell[10004, 239, 3766, 86, 624, "Input"],
Cell[13773, 327, 2222, 50, 437, "Input"],
Cell[15998, 379, 2192, 47, 420, "Input"],
Cell[18193, 428, 529, 9, 28, "Input"],
Cell[CellGroupData[{
Cell[18747, 441, 4621, 102, 811, "Input"],
Cell[23371, 545, 3242, 69, 1039, "Output"]
}, Open  ]],
Cell[CellGroupData[{
Cell[26650, 619, 174, 3, 46, "Input"],
Cell[26827, 624, 14307, 321, 709, "Output"]
}, Open  ]],
Cell[41149, 948, 177, 4, 46, "Input"],
Cell[CellGroupData[{
Cell[41351, 956, 3169, 74, 590, "Input"],
Cell[44523, 1032, 25999, 658, 1593, "Output"]
}, Open  ]]
}
]
*)

(* End of internal cache information *)
